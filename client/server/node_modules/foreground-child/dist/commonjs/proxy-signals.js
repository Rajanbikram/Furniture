"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.proxySignals = void 0;
const all_signals_js_1 = require("./all-signals.js");
 * Starts forwarding signals to `child` through `parent`.
 */
const proxySignals = (child) => {
    const listeners = new Map();
    for (const sig of all_signals_js_1.allSignals) {
        const listener = () => {
            try {
                child.kill(sig);
            }
            catch (_) { }
        };
        try {
            process.on(sig, listener);
            listeners.set(sig, listener);
        }
        catch (_) { }
    }
    const unproxy = () => {
        for (const [sig, listener] of listeners) {
            process.removeListener(sig, listener);
        }
    };
    child.on('exit', unproxy);
    return unproxy;
};
exports.proxySignals = proxySignals;
